{"version":3,"sources":["components/searchBar/searchBar.js","components/imageGalleryItem/imageGalleryItem.js","components/loader/loader.js","components/button/button.js","components/modal/modal.js","components/imageGallery/ImageGallery.js","App.js","index.js"],"names":["SearchBar","state","pictureName","handleNameChange","event","setState","currentTarget","value","toLowerCase","handelSubmit","preventDefault","trim","props","onSubmit","alert","className","this","type","onChange","placeholder","React","Component","ImageGalleryItem","pictures","click","map","id","tags","webformatURL","onClick","src","width","height","alt","Loader","color","timeout","Button","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onCloseModal","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","KEYS","ImageGallery","status","showModal","currentImage","pages","currentPage","handleFetchPictures","page","searchQuery","picturesName","fetch","then","response","ok","json","Promise","reject","Error","totalHits","hits","prevState","Math","ceil","console","log","scrollTo","top","documentElement","scrollHeight","behavior","catch","error","handlLoadMore","openModal","closeModal","prevProps","message","App","handlFormSubmit","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.2dec59f9.chunk.js","sourcesContent":["import React from 'react'\r\nimport './searchBar.scss'\r\n\r\nexport default class SearchBar extends React.Component {\r\n  state = {\r\n    pictureName: '',\r\n  }\r\n\r\n  handleNameChange = (event) => {\r\n    this.setState({ pictureName: event.currentTarget.value.toLowerCase() })\r\n  }\r\n\r\n  handelSubmit = (event) => {\r\n    event.preventDefault()\r\n    if (this.state.pictureName.trim() === '') {\r\n      alert('введите название изображения')\r\n      return\r\n    }\r\n    this.props.onSubmit(this.state.pictureName)\r\n    this.setState({ pictureName: '' })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form onSubmit={this.handelSubmit} className=\"SearchForm\">\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            value={this.state.pictureName}\r\n            onChange={this.handleNameChange}\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport './imageGalleryItem.scss'\r\n\r\nexport default function ImageGalleryItem({ pictures, click }) {\r\n  return pictures.map(({ id, tags, webformatURL }) => (\r\n    <li key={id} className=\"ImageGalleryItem\">\r\n      <img\r\n        onClick={() => click(webformatURL, tags)}\r\n        src={webformatURL}\r\n        width=\"800\"\r\n        height=\"600\"\r\n        alt={tags}\r\n        className=\"ImageGalleryItem-image\"\r\n      />\r\n    </li>\r\n  ))\r\n}\r\n","import React from 'react'\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css'\r\nimport Spinner from 'react-loader-spinner'\r\n\r\nexport default function Loader() {\r\n  return (\r\n    <>\r\n      <h1>Загружаем....</h1>\r\n      <Spinner\r\n        type=\"Puff\"\r\n        color=\"#00BFFF\"\r\n        height={50}\r\n        width={50}\r\n        timeout={5000}\r\n      />\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport './button.scss'\r\n\r\nexport default function Button({ click }) {\r\n  return (\r\n    <button type=\"button\" onClick={click} className=\"Button\">\r\n      Load more\r\n    </button>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport './modal.scss'\r\nimport { createPortal } from 'react-dom'\r\n\r\nconst modalRoot = document.querySelector('#modal-root')\r\n\r\nexport default class Modal extends React.Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown)\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onCloseModal()\r\n    }\r\n  }\r\n\r\n  handleBackdropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onCloseModal()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div onClick={this.handleBackdropClick} className=\"Overlay\">\r\n        <div className=\"Modal\">\r\n          <img src={this.props.src} alt={this.props.alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport './imageGallary.scss'\r\nimport ImageGalleryItem from '../imageGalleryItem/imageGalleryItem'\r\nimport Loader from '../loader/loader'\r\nimport Button from '../button/button'\r\nimport Modal from '../modal/modal'\r\n\r\nconst PER_PAGE = 12\r\nconst KEYS = '22042879-adb59bab87f7729a85f6313d3'\r\n\r\nexport default class ImageGallery extends React.Component {\r\n  state = {\r\n    status: 'idle',\r\n    showModal: false,\r\n    pictures: [],\r\n    currentImage: {},\r\n    pages: 1,\r\n    currentPage: 1,\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.picturesName !== this.props.picturesName) {\r\n      this.handleFetchPictures(1)\r\n    }\r\n  }\r\n\r\n  handleFetchPictures = (page) => {\r\n    const searchQuery = this.props.picturesName\r\n    this.setState({ status: 'pending' })\r\n    fetch(\r\n      `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${searchQuery}&page=${page}&per_page=${PER_PAGE}&key=${KEYS}`\r\n    )\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          return response.json()\r\n        }\r\n        return Promise.reject(new Error(`произошла ошибка`))\r\n      })\r\n      .then(({ totalHits, hits }) => {\r\n        if (totalHits === 0) {\r\n          return Promise.reject(\r\n            new Error(`нет изображения с именем ${searchQuery}`)\r\n          )\r\n        }\r\n\r\n        this.setState(\r\n          (prevState) => ({\r\n            ...prevState,\r\n            pictures: page === 1 ? hits : [...prevState.pictures, ...hits],\r\n            status: 'resolved',\r\n            pages: Math.ceil(totalHits / PER_PAGE),\r\n            currentPage: page,\r\n          }),\r\n          () => {\r\n            console.log('here')\r\n            window.scrollTo({\r\n              top: document.documentElement.scrollHeight,\r\n              behavior: 'smooth',\r\n            })\r\n          }\r\n        )\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ error, status: 'rejected' })\r\n      })\r\n  }\r\n\r\n  handlLoadMore = () => {\r\n    this.handleFetchPictures(this.state.currentPage + 1)\r\n  }\r\n\r\n  openModal = (src, alt) => {\r\n    this.setState({ showModal: true, currentImage: { src, alt } })\r\n  }\r\n\r\n  closeModal = () => {\r\n    this.setState({ showModal: false })\r\n  }\r\n\r\n  render() {\r\n    const { pictures, error, status, pages, currentPage, showModal } =\r\n      this.state\r\n\r\n    if (status === 'idle') {\r\n      return <div>Введите название изображения</div>\r\n    }\r\n\r\n    if (status === 'pending') {\r\n      return <Loader />\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      return <h1>{error.message}</h1>\r\n    }\r\n\r\n    if (status === 'resolved') {\r\n      return (\r\n        <div>\r\n          <ul className=\"ImageGallery\">\r\n            <ImageGalleryItem pictures={pictures} click={this.openModal} />\r\n          </ul>\r\n          {currentPage < pages && <Button click={this.handlLoadMore} />}\r\n          {showModal && (\r\n            <Modal\r\n              onCloseModal={this.closeModal}\r\n              {...this.state.currentImage}\r\n            />\r\n          )}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n","import React from 'react'\nimport './App.scss'\nimport SearchBar from './components/searchBar/searchBar'\nimport ImageGallery from './components/imageGallery/ImageGallery'\n\nimport './App.scss'\n\nclass App extends React.Component {\n  state = {\n    picturesName: '',\n  }\n\n  handlFormSubmit = (picturesName) => {\n    this.setState({ picturesName })\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <SearchBar onSubmit={this.handlFormSubmit} />\n        <ImageGallery picturesName={this.state.picturesName} />\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root')\n)\n"],"sourceRoot":""}